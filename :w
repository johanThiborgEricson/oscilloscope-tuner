(function(global) {
  global.OscilloscopeTuner = function(canvas, userInteractionPromise, done) {
    this.started = userInteractionPromise.then(function() {
      return navigator.mediaDevices.getUserMedia({audio: true});
    }).then(done);
    this.audioContext = new AudioContext();
    this.setIntervalId = global.setInterval(function(){}, 1000);
  };
  global.OscilloscopeTuner.prototype.dispose = function() {
    global.clearInterval(this.setIntervalId);
    return this.audioContext.close();
  }
})(this);
